<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,initial-scale=1.0,width=device-width"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>入口页</title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css" />
    <style type="text/css">
    html,body{
        height: 100%;
    }
    header {
        height: 44px;
        font-size: 18px;
        line-height: 44px;
        text-align: center;
        background-color: #81a9c3;
    		color: #000;
        text-shadow: 1px 1px 1px #fff;
    }
    .header-item-left {
        position: absolute;
        left: 10px;
        bottom: 0;
        width: 44px;
        height: 44px;
        background: url(../../image/back.png) no-repeat center;
        background-size: 20px 20px;
    }
    .header-tittle{
        width: 72%;
        white-space:nowrap;
        text-overflow:ellipsis;
        overflow: hidden;
        margin: 0 auto;
    }
    footer {
        font-size: 14px;
        line-height: 30px;
        text-align: center;
        background-color: #81a9c3;
        color: #000;
        text-shadow: 1px 1px 1px #fff;
    }
    </style>
</head>
<body class="flex-v">
    <header>
      <div class="header-item-left" tapmode="active" onclick="fnClickLeftItem()"></div>
      <span class="header-tittle" id="header-title"></span>
    </header>
    <section class="flex-1">
    </section>
    <footer>Copyright &copy;<span id="year"></span></footer>
</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript">
    var headerH,footerH;
    apiready = function(){
        // header 沉浸式修复
        var header = $api.dom('header');
        headerH = $api.fixStatusBar(header);
        var footer = $api.dom('footer');
    		footerH = $api.fixTabBar(footer);
        // 定义标题文字
        var tTitle = 'root' === api.winName ? api.wgtParam.title:api.pageParam.title;
        $api.byId('header-title').innerText = tTitle;
        // 定义footer文字
        var year = $api.byId('year');
        year.innerHTML = new Date().getFullYear();
        // 打开主页面
       fnOpenMainPage();
    };

    function fnOpenMainPage() {
        api.openFrame({
            name: 'index_frm',
            url: 'index_frm.html',
            rect: {
                marginTop: headerH,
                marginBottom: footerH,
                w: 'auto',
            },
            pageParam: {
                headerH: headerH,
                footerH: footerH
            }
        });
    }

    function fnClickLeftItem() {
        'root' === api.winName ? api.closeWidget():api.closeWin();
    }
</script>
</html>
